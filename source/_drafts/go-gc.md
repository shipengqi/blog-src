---
title: go-gc
tags:
---
自动内存管理的另一个重要的组成部分便是自动回收。

垃圾回收器
 
垃圾回收器的执行过程可根据代码的行为被划分为两个半独立的组件： 赋值器（Mutator）和回收器（Collector）。
 
赋值器指用户态代码。因为对垃圾回收器而言，需要回收的内存是由用户态的代码产生的，用户态代码仅仅只是在修改对象之间的引用关系（对象之间引
用关系的一个有向图，即对象图）进行操作。回收器即为程序运行时负责执行垃圾回收的代码。
 
Go 的内存分配器基于 Thread-Cache Malloc (tcmalloc) [1]，tcmalloc 为每个线程实现了一个本地缓存， 区分了小对象（小于 32kb）和大对象
分配两种分配类型，其管理的内存单元称为 span。 

计算机领域中，无外乎时间换空间、空间换时间。统一管理内存会提前分配或一次性释放一大块内存， 进而减少与操作系统沟通造成的开销，进而提高程序的运
行性能。 支持内存管理另一个优势就是能够更好的支持垃圾回收

Go 的内存分配器核心组件：

Go GC 的特点 无分代 不整理 写屏障 并发标记清理（三色标记清扫）