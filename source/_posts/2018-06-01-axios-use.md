---
title: Axios 使用笔记
date: 2018-06-01 16:26:47
categories: ["NodeJs"]
tags: ["Http"]
---

Axios 使用笔记

<!-- more -->

```javascript
  transformResponse: [async function (data) {
    let resBlob = data;
    let resData = null;
    try {
      let resText = await new Promise((resolve, reject) => {
        let reader = new FileReader();
        reader.addEventListener('abort', reject);
        reader.addEventListener('error', reject);
        reader.addEventListener('loadend', () => {
          resolve(reader.result);
        });
        reader.readAsText(resBlob);
      });
      resData = JSON.parse(resText) // try to parse as json eventually
    } catch (err) {
      // ignore
    }
    if (resData) {
      if (resData.error) {
        return null;
      } else {
        return data;
      }
    } else {
      fileDownload(resBlob, filename);
    }
  }],
```