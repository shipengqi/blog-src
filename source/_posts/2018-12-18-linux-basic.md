---
title: 精读 鸟哥的Linux私房菜
date: 2018-12-18 14:55:57
categories: ["Linux"]
---

计算器就是计算器，计算器的定义：**接受用户输入烦人指令与数据，经由中央处理的函数与逻辑单元运算处理后，以产生或存储有用的信息**。也就是说只要是能让你输入数据（键盘，触摸屏），
并产生输出的（打印机打印，屏幕打印）的机器就是计算器。

<!-- more -->

## 计算机概论

### 计算机硬件的五大元件
- 输入单元，键盘鼠标等。
- 输出单元，屏幕或者打印机等。
- CPU内部的控制单元
- CPU内部的算数逻辑单元
- 主存储器

主机中最重要的就是主板。上面插了CPU，主存储器，硬盘等，智能手机是直接焊上去的。

**CPU 是一个具有特定功能的芯片，里头含有微指令集。**CPU的主要工作在于管理和运算，因此在CPU内又分为两个主要烦人单元：**算数逻辑单元**和**控制单元**。算数逻辑单元主要负责程序运算
与逻辑判断，控制单元主要负责协调周边组件和各单元间的工作。

为什么通常加大内存容量就可以提搞系统运行速度？

**因为CPU读取的数据是从主存储器来的，主存储器内的数据是从输入单元所传输进来的。而CPU处理完的数据也必须写回主存储器中，最后数据从主存储器传输到输出单元**。CPU实际处理的资料（程序或者文件数据）
完全来自于主存储器。

### CPU架构
CPU内部有微指令集，这些指令集的设计分为两种，这是常见的两种CPU架构：**精简指令集（RISC）和复杂指令集（CISC）系统**。

微指令集每个指令的运行时间都很短，执行效能佳，但是如果要做复杂的事情，就要多个指令完成。典型的RISC CPU就是 安谋公司的 ARM CPU系列。

复杂指令集的指令可以执行一些较低阶的硬件操作，指令多而且复杂，每条指令的长度并不相同。指令由于复杂所以执行的时间较长。典型的就是 AMD，Interl等x86架构的CPU。

那么 32位，64位代表了什么？
所谓的位指的是CPU一次读取的最大量。64位CPU代表一次可以读写64 bits的数据。因为CPU读取数据量有限，因此能够从内存中读写的数据也就有所限制。一般32位CPU最大读写的数据量是4GB左右。

不同的x86 CPU有什么区别？

主要是在于微指令集的不同。新的x86有先进的微指令集，可以加速多媒体程序的运作，也可以加强虚拟化的效能，某些微指令还能减低耗电量。

### 其他单元设备

在主机内的设备大多是通过主板连接在一块，主板上有连接所有设备的芯片组，这个芯片组连接所有单元设备，好让CPU可以对这些设备下达命令。其他重要的设备主要有：
- 系统单元，系统单元包括CPU以及内存，主板相关组件。主板还连接很多界面，适配卡（网络卡，显示适配器等）。
- 记忆单元，主存储器（main memory，RAM）与辅助内存（包括硬盘，软盘，光盘，磁带等）。
- 输入输出单元，键盘鼠标，打印机，投影机等。

### 计算机上面的计算单位
#### 容量单位
计算机只认识0和1.0/1这个二进制单位叫做**bit**。8个bits是一个byte。
#### 速度单位
CPU的指令这周期使用**MHz**或者**GHz**，**Hz**就是秒分之一。

`Mbps=Mbit/s`即兆比特每秒。**Million bits per second**的缩写。1Mbps代表每秒传输`1,048,576`位，即每秒传输的数据量为: `1,048,576/8=128K字节/秒=131072字节/秒`。

### 个人计算机
多核指的是在一颗CPU嵌入的两个以上的运算核心。

**CPU的效能除了微指令集会影响，还有频率。频率就是CPU每秒钟可以进行的工作次数**。频率越高代表单位时间内可以做更多的事情。例如，Intel的 i7-4790 频率为3.6GHz，表示这个CPU
一秒内可以进行3.6*10的九次方次工作。

#### CPU的工作频率：外频与倍频

早期的CPU设计中，**所谓的外频指的是CPU与外部组件进行数据传输时的速度，倍率指的是CPU内部用来加速工作效能的一个倍数，两者相乘才是CPU的频率速度**。例如，一个CPU的内频为 3.0GHz，
外频是 333MHz，那么倍频就是 9倍了（3.0G=333M*9）。

新的CPU设计中，将内存控制器整合到CPU内部，没有了所谓的北桥。

#### 32位和64位 CPU 与总线[宽度]
我们已经知道主存储器提供的数据量越大，系统效能越快。如何知道主存储器可以提供的数据量？

所谓的系统总线频宽则是：『FSBx系统总线宽度』亦即每秒钟可传送的最大数据量。 目前常见的系统总线宽度有32/64位(bits)。

例如，前端系统总线最高速度可达1600MHz。 我们看到内存与北桥的频宽为12.8GBytes/s，亦即是1600MHz*64bits = 1600MHz*8Bytes = 12800MByes/s = 12.8GBytes/s

**CPU每次能够处理的数据量称为字长大小(word size)， 字长大小依据CPU的设计而有32位与64位。我们现在所称的计算机是32或64位主要是依据这个 CPU解析的字长大小而来的**。

#### 内存
一般主板上会有主内存的插槽，前面提到CPU所使用的数据都是来自於主内存(main memory)，不论是软件程序还是数据，都必须要读入主内存后CPU才能利用。

**个人计算机的主内存主要组件为动态随机访问内存(Dynamic Random Access Memory, DRAM)， 随机访问内存只有在通电时才能记录与使用，断电后数据就消失了。因此我们也称这种RAM为挥发性內存**。

主内存除了频率/频宽与型号需要考虑之外，**內存的容量也是很重要**！ 因为所有的数据都得要载入內存当中才能够被CPU判读，如果內存容量不够大的话将会导致某些大容量数据无法被完整的载入，
此时已存在內存当中但暂时没有被使用到的数据必须要先被释放，使得可用内存容量大於该数据，那份新数据才能够被载入！所以，**通常越大的内存代表越快速的系统**，这是因为系统不用常常释放一些内存内部的数据。
**以服务器来说，主内存的容量有时比CPU的速度还要来的重要的**！

##### DRAM与SRAM
除了主内存之外，事实上整部个人计算机当中还有许许多多的内存存在。最为我们所知的就是CPU内的第二层缓存内存。

我们现在知道CPU的数据都是由主内存提供，但主内存的数据毕竟得经由北桥送到CPU内。 如果某些很常用的程序或数据可以放置到CPU内部的话，那么CPU数据的读取就不需要透过北桥！
大大的提升效能。这就是第二层缓存的设计概念。

因为第二层缓存(L2 cache)整合到CPU内部，因此这个L2内存的速度必须要CPU频率相同。使用DRAM是无法达到这个频率速度的，此时就需要**静态随机访问内存(Static Random Access Memory, SRAM)**。

##### 只读内存(ROM)

BIOS对於个人计算机来说是非常重要的， 因为他是系统在开机的时候首先会去读取的一个小程序。

BIOS(Basic Input Output System)这套程序是写死到主机板上面的一个内存芯片中， 这个内存芯片在没有通电时也能够将数据记录下来，那就是**只读内存(Read Only Memory, ROM)。
ROM是一种非挥发性的内存**。

#### 显示卡
假设你的桌面使用1024x768解析度，且使用全彩(每个像素占用3bytes的容量)，请问你的显示卡至少需要多少内存才能使用这样的彩度？

因为1024x768解析度中会有786432个像素，每个像素占用3bytes，所以总共需要2.25MBytes以上才行！ 但如果考虑萤幕的更新率(每秒钟萤幕的更新次数)，显示卡的内存还是越大越好！
#### 硬盘与储存设备

计算机总是需要记录与读取数据的，所以就需要有储存设备。包括有：硬盘、软盘、MO、CD、DVD、磁带机、随身碟(快闪内存)、还有新一代的蓝光光驱等，乃至於大型机器的区域网络储存设备(SAN, NAS)等等，
都是可以用来储存数据的。最常见的应该就是硬盘。

### 数据表示方式
**计算机只认识0与1，记录的数据也是只能记录0与1而已，所以计算机常用的数据是二进位的**。

但是我们常用的数值运算是十进制，文字方面则有非常多的语言，台湾常用的语言就有英文、中文（又分正体与简体中文）、日文等。 那么电脑如何记录与显示这些数值/文字呢？就得要通过一系列的转换才可以啦！

#### 数字系统
**所谓的十进制指的是逢十进一位， 因此在个位数归为零而十位数写成1。所以所谓的二进制，就是逢二就前进一位的意思**。

#### 文字编码系统
电脑都只有记录0/1而已，甚至记录的数据都是使用Byte/bit等单位来记录的，那么文字该如何记录？

**事实上文字文件也是被记录为0与1而已，而这个文件的内容要被取出来查阅时，必须要经过一个编码系统的处理才行**。 所谓的“编码系统”可以想成是一个“字码对照表”。

当我们要写入文件的文字数据时，该文字数据会由编码对照表将该文字转成数字后，再存入文件当中。 同样的，当我们要将文件内容的数据读出时，也会经过编码对照表将该数字转成对应的文字后，再显示到屏幕上。
这也就是为什么浏览器上面如果编码写错时，会出现乱码？这是因为编码对照表写错，导致对照的文字产生误差。

常用的英文编码表为ASCII系统。这个系统每个字符占用1个字节，也就是8位，也就是说会有256种变化。中文早期使用big5编码表，每个中文字占用2个字节，理论上可以表示65536个文字，但实际上只有一万三千
多个文字，还是有很多问题，于是出现了 Unicode编码。我们常用的UTF-8就是这个。


### 软件程序运行
电脑系统软件分为两类：系统软件和应用程序。

#### 机器程序和编译程序
电脑只认识0和1，而且电脑的运算和逻辑判断是在CPU内部，CPU又有微指令集，所以当我们需要CPU时，就需要写可以让CPU读的懂得指令码。

这就很麻烦了：
- 需要了解机器语言。
- 需要了解CPU指令。
- 每个电脑的CPU不同，微指令集可能也不同，所以A电脑的程序可能在B电脑上不能运行。
- 程序具有专一性，不同的程序需要从头再写一遍。

于是，为了解决上面的问题，出现了人类可以读懂的计算机语言（C，C++，Java等），再创造“编译器”将这种语言转译成机器可读的机器码。
